# WorkTrack
#### Video Demo:  <URL https://youtu.be/HXdA0qIhNvc>
#### Description: A workout webapp that allows users to track progress and goals
## Templates
The templates directory contains one subdirectory, sessions, and 8 html files. Let's first go over the sessions directory.

The sessions directory contains 12 html files, each corresponding to one premade workout session that is linked in the sessions.html file in the templates directory. Each of the sessions extends layout.html, another file in the templates directory, and I did this for conciseness, due to the fact that all of the sessions follow the same pattern. In each html file, there is a h1 heading along with an unordered list, each with a varying number of items. Each item corresponds to one exercise in the session, with sets and reps included where applicable. In layout.html, you can see two forms above the block body, and these are links back to the homepage and the sessions page. I used Bootstrap styling to make the buttons and links more aesthetically pleasing, and I followed their documentation to add classes to my elements. These pages are all relatively static, and users cannot really interact with them, as they are designed to just be inspiration or a full workout for any user. Now let's move onto the other files in the templates directory.

### index.html
This is the homepage of the website. Its code is simple, and all it does is welcome the user with Jinja syntax to determine the logged in user's username, and then provides links to all of the pages in the website. The account and logout pages are styled differently as they are about the user's account, and are not part of the user's actual fitness. The logout function is relatively simple, once clicked the session username is set to None, and you are redirected back to the home page. However, because there is no session username, you are again redirected to the login page.

### sessions.html
Sessions.html is the file that is the link to all of the other files in the sessions directory. Inside, at the very top there is a form that sends a request to go to the home page, and redirects the user to the home page. After that, there are three card decks, a feature of Bootstrap that allows to have multiple cards, another Bootstrap feature, on one line with the same dimensions. I have three card decks of 4 cards each, so 12 cards total. Before choosing cards as my chosen feature to display the workouts, I was debating between cards and a carousel, which would display constantly scrolling slides with a summary text and a link for the user to go to the session's full page. I chose the cards in the end, as it is a better use of space, and provide a more friendly user interaction. If you look at each card element, it contains a body that contains a title, the workout's name, and a body, a quick description of the workout. In the footer, there is a link to the workout, using a flask route that renders the appropriate session template. This page is also static, as it is meant for users to find a workout, or be inspired from one.

### log.html and goals.html
These two files are very similar in nature, and have similar purposes in their operation. They both take user input from a form on the top of the page, and when the form is submitted, add that data to a SQL database using Flask. Once that action is complete, the page is reloaded and a table displays the data the user inputted, their goals in goals.html and their workout logs in log.html. I used Bootstrap again to add a basic style on the table and form. Going into the actual HTML, both files have a form to return to the home page as well as a form in order to add data into the table. The tables themselves include their respective headings as well as a Jinja for loop to loop over every value returned from the SQL query that is run in the file's respective Flask functions. It then creates a new table cell for each relevant piece of data the user needs to see (excluding the username as that is in the table but not relevant to the user). Then the tables display that data and I used Bootstrap to make it prettier. The goals.html file has some extra code in it, related to being able to complete goals and remove them from the table. The JavaScript in the header uses jQuery and AJAX in order to do this. It first adds an event listener to every checkbox element. Once the checkbox is clicked, a jQuery function is run to delete the table row from visual sight, then an AJAX request is made to run the /delete_goal function in app.py, which removes the data from the database.

### login.html, signup.html, and account.html
These three files are all similar in that they use Flask to access the credentials table of the database. When a user first enters the website, if there is no session username, they are automatically redirected to the login page. If the user does not have an account they are given the option to go to the signup page with a button underneath the login form. In the login form, once the user submits credentials, an SQL query is run in app.py in order to see if those credentials exist in the database. If they do not, the appropriate error is displayed under the login form using Jinja syntax to have an error placeholder. If the login is successful, the session username is set to the username. The signup page is similar code, however once the user submits the form the SQL query checks if the username already exists in the database, and if it does it displays the error using Jinja syntax with an error placeholder. If the signup is successful, the session's username is set to the username and the credentials are added to the database. Once the user is logged in, they can access their account details with the account link in the home page. In this file, they can reset their password by typing in their current password as well as the new password twice. Once submitted, the /account function in app.py first will check if the inputted current password and session username exist in the database, for security. If they do, it will then check if the new password and the verification new password match. If they do, it will change the password of the current session username, if they don't the appropriate error will be displayed.

## app.py and database.db

### app.py
At the top of app.py, you see multiple functions being imported from three libraries. From flask and flask_session, 6 functions are imported in order to allow for user interactivity and sessions. From cs50, SQL is imported to access the database.db file. The next lines are configuration, lines 5, 7, 8, and 9 all make the file a flask program, then set up sessions. Line 11 makes the global variable db, which is set to the SQL database used in the project. From here on out, most of the code has been explained already by their respective html documents documentation. The only function left unexplained is add. This function is what adds goals and logs to the database. When accessed, it first checks where the function is being called from, logs or goals. It does this by checking if some sample values from each form, goals and logs, are None or not. If they are not, the function assumes it is being called from there (if 'goal' is not none, the function is being called from the goals file). Once this is done, it stores the values from the submitted form in variables, and then inserts them using an SQL query. Then, the user is redirected back to the page they came from in order to reload the page and display the new data. Finally, lines 112-158 are just rendering templates for each session, as they do not have any dynamicity which would require more code written.

### database.db
This database stores all user data with different tables. The schema of the database is three tables, credentials, logs, and goals. All of them have a column for a username, and their own necessary columns. Credentials has password, logs has type, duration, worked, and date, and goals has goal. These all contain every user's credentials, logs, and goals. This is why the username column is relevant, as it allows for queries to be run where the username is equal to the current session's username.
